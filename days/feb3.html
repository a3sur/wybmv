<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>feb3</title>
<style>
body {
    margin: 0;
    background: #c0c0c0;
    font-family: Chicago, monospace;
    overflow: hidden;
}
.window {
    width: 540px;
    margin: 20px auto;
    background: #fff;
    border: 2px solid #000;
    box-shadow: 4px 4px #000;
}
.titlebar {
    background: #000;
    color: #fff;
    padding: 4px 8px;
    font-size: 14px;
}
.content {
    padding: 10px;
}
canvas {
    background: #000;
    display: block;
    margin: auto;
}
#status {
    text-align: center;
    margin-top: 6px;
}
.hidden { display: none; }
button {
    font-family: monospace;
    padding: 4px 8px;
    cursor: pointer;
}
.shake { animation: shake 0.15s infinite; }
@keyframes shake {
    0% { transform: translate(0,0); }
    25% { transform: translate(3px,1px); }
    50% { transform: translate(-3px,-1px); }
    75% { transform: translate(2px,-2px); }
}
.explode { animation: explode 0.6s forwards; }
@keyframes explode { to { transform: scale(1.6); opacity: 0; } }

/* Gallery */
.gallery-window { max-height: 500px; overflow-y: auto; }
.gallery {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}
.photo {
    background: #ddd;
    height: 180px;
    opacity: 0;
    transform: scale(0.9);
    transition: all 0.6s ease;
}
.photo.visible { opacity:1; transform:scale(1); }
</style>
</head>
<body>

<div class="window" id="gameWindow">
    <div class="titlebar">GALAGA</div>
    <div class="content">
        <canvas id="game" width="500" height="320"></canvas>
        <div id="status"></div>
    </div>
</div>

<div class="window hidden" id="galleryWindow">
    <div class="titlebar">PHOTO GALLERY</div>
    <div class="content gallery-window">
        <div class="gallery">
            <div class="photo"><img src="1.jpeg" alt="Photo 1" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="2.jpeg" alt="Photo 2" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="3.jpeg" alt="Photo 3" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="4.jpeg" alt="Photo 4" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="5.jpeg" alt="Photo 5" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="6.jpeg" alt="Photo 6" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="7.jpeg" alt="Photo 7" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="8.jpeg" alt="Photo 8" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="9.jpeg" alt="Photo 9" style="width:100%; height:100%; object-fit:cover;"></div>
            <div class="photo"><img src="10.jpeg" alt="Photo 10" style="width:100%; height:100%; object-fit:cover;"></div>
        </div>
        <br>
        <button onclick="location.href='loveme.html'">‚Üê Back</button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const statusText = document.getElementById("status");

let player, bullets, enemyBullets, enemies, boss;
let wave, phase, lives, loop;
let lastShot = 0;
const SHOT_COOLDOWN = 260;
const MAX_BULLETS = 3;

function resetGame() {
    player = { x: 240, y: 290 };
    bullets = [];
    enemyBullets = [];
    enemies = [];
    boss = null;
    wave = 1;
    phase = "wave";
    lives = 3;
    spawnWave();
    if (loop) clearInterval(loop);
    loop = setInterval(update, 30);
}

// SPAWN ENEMIES BASED ON WAVE
function spawnWave() {
    enemies = [];
    const counts = [6,6,9];
    const num = counts[wave-1];
    const cols = 3 + wave; // 4 or 5
    for (let i=0;i<num;i++){
        const col = i % cols;
        const row = Math.floor(i/cols);
        enemies.push({
            x:60+col*80,
            y:40+row*40,
            baseX:60+col*80,
            baseY:40+row*40,
            alive:true,
            dive:false,
            t:Math.random()*Math.PI
        });
    }
}

let devBuffer="";
document.addEventListener("keydown", e=>{
    if(e.key==="ArrowLeft") player.x-=10;
    if(e.key==="ArrowRight") player.x+=10;
    if(player.x<-20) player.x=canvas.width;
    if(player.x>canvas.width) player.x=-20;
    if(e.key===" " && Date.now()-lastShot>SHOT_COOLDOWN && bullets.length<MAX_BULLETS){
        bullets.push({x:player.x+10,y:player.y});
        lastShot=Date.now();
    }

    devBuffer+=e.key.toLowerCase();
    if(devBuffer.endsWith("dev14")) nextWave();
    if(devBuffer.endsWith("dev26")) win();
    if(devBuffer.length>10) devBuffer="";
});

function nextWave(){
    if(phase==="wave"){
        enemies.forEach(e=>e.alive=false);
    }else if(phase==="boss"){
        boss.hp=0;
    }
}

function update(){
    ctx.clearRect(0,0,500,320);

    // player
    ctx.fillStyle="lime";
    ctx.fillRect(player.x,player.y,20,10);

    bullets.forEach(b=>b.y-=6);
    bullets=bullets.filter(b=>b.y>-10);
    bullets.forEach(b=>ctx.fillRect(b.x,b.y,2,6));

    enemyBullets.forEach(b=>{b.y+=3; ctx.fillRect(b.x,b.y,3,6);});
    enemyBullets=enemyBullets.filter(b=>b.y<330);

    if(phase==="wave"){
        enemies.forEach(e=>{
            if(!e.alive) return;
            e.x = e.baseX + Math.sin(e.t+=0.03)*20;
            if(!e.dive && Math.random()<0.002)e.dive=true;
            if(e.dive){
                e.y+=2;
                if(Math.random()<0.01) enemyBullets.push({x:e.x+10,y:e.y});
                if(e.y>260){e.y=e.baseY;e.dive=false;}
            } else { e.x+=(e.baseX-e.x)*0.05; e.y+=(e.baseY-e.y)*0.05; }

            ctx.font="16px monospace";
            ctx.fillText("üëæ", e.x, e.y);

            bullets.forEach(b=>{
                if(b.x>e.x && b.x<e.x+20 && b.y>e.y-16 && b.y<e.y){e.alive=false;b.y=-10;}
            });
        });

        if(enemies.every(e=>!e.alive)){
            if(wave<3){ wave++; spawnWave(); } 
            else { phase="boss"; boss={x:200,y:40,hp:25,rage:false}; }
        }
        statusText.textContent=`Wave ${wave} | Lives ${lives}`;
    }

    if(phase==="boss"){
        if(!boss.rage && boss.hp<10) boss.rage=true;
        boss.x += boss.rage ? Math.sin(Date.now()/100)*6 : Math.sin(Date.now()/200)*2;
        ctx.fillStyle = boss.rage ? "crimson":"purple";
        ctx.fillRect(boss.x,boss.y,100,20);

        if(Math.random()<(boss.rage?0.08:0.04)) enemyBullets.push({x:boss.x+Math.random()*100,y:boss.y+20});
        bullets.forEach(b=>{
            if(b.x>boss.x && b.x<boss.x+100 && b.y<boss.y+20){boss.hp--;b.y=-10;}
        });
        if(boss.hp<=0) win();
        statusText.textContent=`Boss HP ${boss.hp} | Lives ${lives}`;
    }

    enemyBullets.forEach(b=>{
        if(b.x>player.x && b.x<player.x+20 && b.y>player.y){b.y=999;lives--;}
    });
    if(lives<=0) gameOver();
}

function gameOver(){clearInterval(loop);statusText.innerHTML=`<button onclick="resetGame()">START OVER?</button>`;}
function win(){clearInterval(loop);document.body.classList.add("shake");document.getElementById("gameWindow").classList.add("explode");setTimeout(()=>{document.body.classList.remove("shake");document.getElementById("gameWindow").classList.add("hidden");document.getElementById("galleryWindow").classList.remove("hidden");revealGallery();},800);}
function revealGallery(){document.querySelectorAll(".photo").forEach(p=>{const obs=new IntersectionObserver(e=>e.forEach(x=>x.isIntersecting&&x.target.classList.add("visible")),{threshold:0.2});obs.observe(p);});}

resetGame();
</script>

</body>
</html>


