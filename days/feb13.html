<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Finney Fiasco</title>

<style>
body{
    margin:0;
    background:radial-gradient(circle at center,#3a3431 0%,#1e1b19 100%);
    font-family:"Courier New", monospace;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:#fff;
}

.desk{
    width:950px;
    height:620px;
    background:linear-gradient(145deg,#6b4f3a,#4a3627);
    border:10px solid #2b1e16;
    position:relative;
    box-shadow:0 0 50px #000 inset, 0 0 40px #000;
    border-radius:8px;
}

.object{
    position:absolute;
    background:#e6d7b8;
    padding:12px 18px;
    border:3px solid #2a211c;
    cursor:pointer;
    font-weight:bold;
    color:#000;
    transition:.2s;
    border-radius:4px;
}

.object:hover{
    transform:scale(1.05);
    box-shadow:0 5px 15px rgba(0,0,0,.6);
}

#folder{ top:70px; left:90px; }
#report{ top:70px; right:90px; }
#suspects{ bottom:70px; left:50%; transform:translateX(-50%); }
#detective{ bottom:70px; right:90px; }

.window{
    position:absolute;
    top:90px;
    left:50%;
    transform:translateX(-50%);
    width:720px;
    height:440px;
    background:#0c0c0c;
    color:#00ff66;
    padding:20px;
    border:4px solid #333;
    display:none;
    overflow:auto;
    box-shadow:0 0 20px #000;
}

.closeBtn{
    position:absolute;
    top:8px;
    right:15px;
    cursor:pointer;
    color:#ff4444;
    font-weight:bold;
}

button{
    font-family:"Courier New", monospace;
    background:#111;
    color:#00ff66;
    border:1px solid #00ff66;
    padding:6px 10px;
    cursor:pointer;
}

button:hover{
    background:#00ff66;
    color:#000;
}

input{
    background:black;
    color:#00ff66;
    border:1px solid #00ff66;
    padding:4px;
    font-family:"Courier New", monospace;
}

hr{ border:1px solid #333; }
</style>
</head>

<body>

<div class="desk">
    <div id="folder" class="object">Case Files</div>
    <div id="report" class="object">Incident Report</div>
    <div id="suspects" class="object">Suspect List</div>
    <div id="detective" class="object">Detective Report</div>

    <div id="window" class="window">
        <div class="closeBtn" onclick="closeWindow()">[X]</div>
        <div id="content"></div>
    </div>
</div>

<script>
const culprit = "bambi";

const suspects = {
"Winnie (Princess, Dog)": {
alibi:"I was sunbathing.",
motive:"He existed.",
relation:"He tasted mediocre.",
suspicion:"Bambi is evil."
},
"Lucy (The Plague, Cat)": {
alibi:"fever warm floor ticking claws whisper",
motive:"buzzing buzzing inside",
relation:"dust dust dust",
suspicion:"behind the box scratching"
},
"Frankie (Lonesome Freak, Cat)": {},
"Bambi (Mean Girl, Cat)": {
alibi:"I was absolutely nowhere near that litterbox.",
motive:"He was beneath me. He didn't deserve to exist.",
relation:"Just another cat. I don't even know his name.",
suspicion:"Claws? I throw hands, not claws."
},
"Pixie (Devious Sister, Cat)": {
alibi:"Reorganizing jewelry.",
motive:"He spread gossip.",
relation:"Messy fur.",
suspicion:"Feral behavior."
},
"Minerva (Devious Sister, Cat)": {
alibi:"Being fabulous.",
motive:"No class.",
relation:"Unrefined.",
suspicion:"How tacky."
},
"Jolene (Jobert, Dog)": {
alibi:"Ball. Treat.",
motive:"No motive.",
relation:"Ran from me once.",
suspicion:"Fetch?"
}
};

let questionCount = {};
let questionHistory = {};

function openWindow(text){
    document.getElementById("content").innerHTML = text;
    document.getElementById("window").style.display="block";
}

function closeWindow(){
    document.getElementById("window").style.display="none";
}

function showSuspectList(){
    let list="<h3>=== SUSPECT LIST ===</h3><br>";
    for(let name in suspects){
        list += `<button onclick="interrogate('${name.replace(/'/g,"\\'")}')">${name}</button><br><br>`;
    }
    openWindow(list);
}

document.getElementById("folder").onclick=function(){
openWindow(`
<h3>=== CASE FILES ===</h3>
Victim: Finney<br>
Time: 7:38 PM Wednesday<br>
Last seen behind litterbox.<br>
Claw marks found.<br>
Believed to be a kidnapping, but no ransom note found.<br>
Check the incident report for more details.
`);
};

document.getElementById("report").onclick=function(){
openWindow(`
<h3>=== INCIDENT REPORT ===</h3>
Signs of a struggle.<br>
Litter disturbed violently.<br>
Unidentified hair, believed to be from Lucy.<br>
Witnesses report hearing repeated hissing.<br>
Witnesses report seeing Bambi near the scene.<br>
Police have released no findings as of yet, but are looking into local cats and dogs.
`);
};

document.getElementById("suspects").onclick=showSuspectList;

function interrogate(name){
    if(!questionCount[name]) questionCount[name]=0;
    if(!questionHistory[name]) questionHistory[name]=[];

    openWindow(`
<h3>=== INTERROGATING ${name} ===</h3>
1 - Where were you?<br>
2 - Motive?<br>
3 - Relationship?<br>
4 - Claw marks?<br><br>

<input id="qInput" maxlength="1">
<button onclick="askQuestion('${name.replace(/'/g,"\\'")}')">Ask</button>
<button onclick="showSuspectList()">Back</button>

<hr>
<div id="response"></div>
`);
}

function askQuestion(name){
    const q=document.getElementById("qInput").value;
    if(!["1","2","3","4"].includes(q)){
        document.getElementById("response").innerHTML="> Invalid question.";
        return;
    }

    let r="";

    // BAMBI SPECIAL ORDER: 2 → 4 → 1 → 3
    if(name.startsWith("Bambi")){
        questionHistory[name].push(q);

        const pattern=["2","4","1","3"];
        const history=questionHistory[name];

        const matches=pattern.every((val,i)=>history[i]===val);

        if(matches && history.length>=4){
            r="I NEED TO FINISH THE JOB. INVADER! I HATE HIM! Oops.";
        } else {
            const s=suspects[name];
            if(q==="1") r=s.alibi;
            if(q==="2") r=s.motive;
            if(q==="3") r=s.relation;
            if(q==="4") r=s.suspicion;
        }
    }

    // FRANKIE ESCALATION
    else if(name.startsWith("Frankie")){
        questionCount[name]++;

        if(questionCount[name]===1) r="... ... ...";
        else if(questionCount[name]===2) r="... ... HISS";
        else if(questionCount[name]===3) r="HISS, HISS, HISS";
        else r="HISS HISS HISS HISS HISS HISS HISS HISS HISS HISS HISS HISS";
    }

    // NORMAL SUSPECTS
    else{
        const s=suspects[name];
        if(q==="1") r=s.alibi;
        if(q==="2") r=s.motive;
        if(q==="3") r=s.relation;
        if(q==="4") r=s.suspicion;
    }

    document.getElementById("response").innerHTML="> "+r;
}

document.getElementById("detective").onclick=function(){
openWindow(`
<h3>=== DETECTIVE REPORT ===</h3>
Enter kidnapper name:<br><br>
<input id="culpritInput">
<button onclick="submitCulprit()">Submit</button>
`);
};

function submitCulprit(){
const guess=document.getElementById("culpritInput").value.toLowerCase().trim();
if(guess===culprit){
openWindow(`
<h2>LOCAL CAT CAUGHT RED HANDED</h2>
Bambi exposed.<br>
Finney recovered alive.<br><br>
<button onclick="showSuspectList()">Back</button>
`);
}else{
openWindow(`
<h2>YOU ARE FIRED</h2>
<button onclick="showSuspectList()">Try Again</button>
`);
}
}
</script>

</body>
</html>
