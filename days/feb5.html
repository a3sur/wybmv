<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Retro Quiz</title>
<style>
body{
    margin:0;
    background:#c0c0c0;
    font-family:Chicago, monospace;
    display:flex;
    justify-content:center;
}
/* make sure you dont remove more than necessary */
.window{
    margin-top:20px;
    width:560px;
    background:#fff;
    border:2px solid #000;
    box-shadow:4px 4px #000;
}
.titlebar{
    background:#000;
    color:#fff;
    padding:4px 8px;
    font-size:14px;
    letter-spacing:0.25em;
    text-align:center;
}
.content{padding:12px;}
.question{margin-bottom:14px;}
.answers label{
    display:block;
    margin-left:10px;
    cursor:pointer;
}
button{
    font-family:monospace;
    padding:4px 10px;
    margin:4px;
    cursor:pointer;
}
button:disabled{
    opacity:0.5;
    cursor:not-allowed;
}
.footer{
    text-align:center;
    margin-top:10px;
}
.hidden{display:none;}
#scoreDisplay{
    margin-top:6px;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="window" id="quizWindow">
    <div class="titlebar">RETRO-QUIZ.EXE</div>
    <div class="content">
        <div id="quiz"></div>

        <div class="footer">
            <button id="submitBtn" disabled>Submit</button>
            <button id="retryBtn" class="hidden">Retry</button>
            <button id="continueBtn" class="hidden">Continue</button>
            <button onclick="location.href='loveme.html'">Back</button>
            <div id="scoreDisplay" class="hidden"></div>
        </div>
    </div>
</div>

<script>
const questions = [
    {q:"Which is my favorite color?", a:["Green","Yellow","Red"], c:0},
    {q:"What street did I live on as a kid?", a:["Sunset","Trionfo","San Souci"], c:1},
    {q:"Which fruit would I pick?", a:["Grapefruit","Kiwi","Raspberry"], c:1},
    {q:"Who is my favorite child?", a:["Jolene","Winnie","Both"], c:2},
    {q:"What was my pet turtle named?", a:["Righteous","Justice","Leo"], c:0},
    {q:"Which is my favorite car?", a:["Mercury Cougar","Pontiac Barracuda","Toyota Century"], c:0},
    {q:"Which is my favorite song?", a:["Moonlight, Kali Uchis","Man Who Sold The World, David Bowie","Arabella, Arctic Monekys"], c:1},
    {q:"Which is my favorite sweet?", a:["Ice Cream","Tres Leches","Brownie"], c:2},
    {q:"Which is my favorite type of vanilla?", a:["French Vanilla","Homemade Vanilla","Mantecado"], c:1},
    {q:"How old was I when I wrote my first proper poem?", a:["10","7","14"], c:0}
];

const quizEl = document.getElementById("quiz");
const submitBtn = document.getElementById("submitBtn");
const retryBtn = document.getElementById("retryBtn");
const continueBtn = document.getElementById("continueBtn");
const scoreDisplay = document.getElementById("scoreDisplay");

let current = [];
let devBuffer = "";

function shuffle(arr){
    return arr
        .map(v=>[Math.random(),v])
        .sort((a,b)=>a[0]-b[0])
        .map(v=>v[1]);
}

function startQuiz(){
    quizEl.innerHTML="";
    submitBtn.disabled=true;
    submitBtn.classList.remove("hidden");
    retryBtn.classList.add("hidden");
    continueBtn.classList.add("hidden");
    scoreDisplay.classList.add("hidden");

    current = shuffle([...questions]).map(q=>({
        ...q,
        answers: shuffle(q.a.map((txt,i)=>({txt,idx:i})))
    }));

    current.forEach((q,i)=>{
        const div=document.createElement("div");
        div.className="question";
        div.innerHTML=`<strong>${i+1}. ${q.q}</strong>`;

        const ansDiv=document.createElement("div");
        ansDiv.className="answers";

        q.answers.forEach(a=>{
            ansDiv.innerHTML+=`
                <label>
                    <input type="radio" name="q${i}" value="${a.idx}">
                    ${a.txt}
                </label>`;
        });

        div.appendChild(ansDiv);
        quizEl.appendChild(div);
    });

    document.querySelectorAll("input[type=radio]").forEach(r=>{
        r.addEventListener("change",checkReady);
    });
}

function checkReady(){
    const answered = [...new Set(
        [...document.querySelectorAll("input[type=radio]:checked")]
        .map(r=>r.name)
    )];
    submitBtn.disabled = answered.length !== current.length;
}

submitBtn.onclick=()=>{
    let correctCount = 0;

    current.forEach((q,i)=>{
        const chosen=document.querySelector(`input[name="q${i}"]:checked`);
        if(chosen && parseInt(chosen.value)===q.c){
            correctCount++;
        }
    });

    submitBtn.classList.add("hidden");
    scoreDisplay.textContent = `Score: ${correctCount} / ${current.length}`;
    scoreDisplay.classList.remove("hidden");

    if(correctCount === current.length){
        continueBtn.classList.remove("hidden");
    } else {
        retryBtn.classList.remove("hidden");
    }
};

retryBtn.onclick=startQuiz;
continueBtn.onclick=showNotepad;

// DEV26 shortcut
document.addEventListener("keydown",e=>{
    devBuffer += e.key.toLowerCase();
    if(devBuffer.endsWith("dev26")) showNotepad();
    if(devBuffer.length>10) devBuffer="";
});

function showNotepad(){
    document.body.innerHTML="";
    const win=document.createElement("div");
    win.className="window";
    win.style.width="420px";
    win.style.margin="50px auto";
    win.innerHTML=`
        <div class="titlebar">untitled.txt</div>
        <div class="content" style="padding:20px;">
            <h3>i hope you miss me</h3>
            <div style="white-space: pre-wrap;">
i wish i could show you inside my brain
show you who i am really
and not who you think i might be

there is no one like you
i cant replace you
i cant replace you
i cant replace you

you spend time in fear
i understand why
i understand

but
maybe if you could see inside
and pop the lid on this machine
and see the wizard of oz

you would see
the normal and the strange
the bad and the good
and over anything else

the love i have for you
so much it makes me stupid
so much it makes me mad
so much it makes me sad

at the end of the day
i cant be upset
and just miss you

and i hope you miss me too
</div>
            <button onclick="location.href='loveme.html'">Back</button>
        </div>
    `;
    document.body.appendChild(win);
}

startQuiz();
</script>

</body>
</html>
