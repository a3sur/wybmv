<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Retro Quiz</title>
<style>
body{
    margin:0;
    background:#c0c0c0;
    font-family:Chicago, monospace;
    display:flex;
    justify-content:center;
}
.window{
    margin-top:20px;
    width:560px;
    background:#fff;
    border:2px solid #000;
    box-shadow:4px 4px #000;
}
.titlebar{
    background:#000;
    color:#fff;
    padding:4px 8px;
    font-size:14px;
    letter-spacing:0.25em;
    text-align:center;
}
.content{padding:12px;}
.question{margin-bottom:14px;}
.answers label{
    display:block;
    margin-left:10px;
    cursor:pointer;
}
.secret-word{
    color:blue;
    text-decoration:underline;
    cursor:pointer;
}
button{
    font-family:monospace;
    padding:4px 10px;
    margin:4px;
    cursor:pointer;
}
button:disabled{
    opacity:0.5;
    cursor:not-allowed;
}
.footer{
    text-align:center;
    margin-top:10px;
}
.hidden{display:none;}
</style>
</head>
<body>

<div class="window" id="quizWindow">
    <div class="titlebar">RETRO-QUIZ.EXE</div>
    <div class="content">
        <div id="quiz"></div>

        <div class="footer">
            <button id="submitBtn" disabled>Submit</button>
            <button id="retryBtn" class="hidden">Retry</button>
            <button id="continueBtn" class="hidden">Continue</button>
            <button onclick="location.href='loveme.html'">Back</button>
        </div>
    </div>
</div>

<script>
const questions = [
    {q:"What color is the sky?", a:["Blue","Green","Red"], c:0},
    {q:"2 + 2 =", a:["3","4","5"], c:1},
    {q:"Which is a fruit?", a:["Carrot","Apple","Celery"], c:1},

    // ðŸ‘€ SECRET QUESTION
    {
        q:"Which word feels <span class='secret-word' id='secretTrigger'>right</span>?",
        a:["This one","That one","The other"],
        secret:"The hidden one",
        c:3
    },

    {q:"Which animal barks?", a:["Cat","Dog","Fish"], c:1},
    {q:"Which one flies?", a:["Bird","Snake","Dog"], c:0},
    {q:"Water freezes at?", a:["0Â°C","10Â°C","50Â°C"], c:0},
    {q:"Which is a planet?", a:["Moon","Mars","Sun"], c:1},
    {q:"Fire is?", a:["Cold","Wet","Hot"], c:2},
    {q:"Which one is sweet?", a:["Salt","Sugar","Pepper"], c:1}
];

const quizEl = document.getElementById("quiz");
const submitBtn = document.getElementById("submitBtn");
const retryBtn = document.getElementById("retryBtn");
const continueBtn = document.getElementById("continueBtn");

let current = [];
let devBuffer = "";

function shuffle(arr){
    return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);
}

function startQuiz(){
    quizEl.innerHTML="";
    submitBtn.disabled=true;
    submitBtn.classList.remove("hidden");
    retryBtn.classList.add("hidden");
    continueBtn.classList.add("hidden");

    current = shuffle([...questions]).map(q=>{
        let answers = q.a.map((txt,i)=>({txt,idx:i}));
        if(q.secret) answers.push({txt:q.secret,idx:3,hidden:true});
        return {...q, answers:shuffle(answers)};
    });

    current.forEach((q,i)=>{
        const div=document.createElement("div");
        div.className="question";
        div.innerHTML=`<strong>${i+1}. ${q.q}</strong>`;
        const ansDiv=document.createElement("div");
        ansDiv.className="answers";

        q.answers.forEach(a=>{
            const hiddenClass = a.hidden ? "hidden" : "";
            ansDiv.innerHTML+=`
                <label class="${hiddenClass}">
                    <input type="radio" name="q${i}" value="${a.idx}">
                    ${a.txt}
                </label>`;
        });

        div.appendChild(ansDiv);
        quizEl.appendChild(div);
    });

    const trigger = document.getElementById("secretTrigger");
    if(trigger){
        trigger.onclick=()=>{
            trigger.style.color="crimson";
            document.querySelectorAll(".answers label.hidden").forEach(l=>{
                l.classList.remove("hidden");
            });
        };
    }

    document.querySelectorAll("input[type=radio]").forEach(r=>{
        r.addEventListener("change",checkReady);
    });
}

function checkReady(){
    const answered = [...new Set(
        [...document.querySelectorAll("input[type=radio]:checked")]
        .map(r=>r.name)
    )];
    submitBtn.disabled = answered.length !== current.length;
}

submitBtn.onclick=()=>{
    let correct=true;
    current.forEach((q,i)=>{
        const chosen=document.querySelector(`input[name="q${i}"]:checked`);
        if(!chosen || parseInt(chosen.value)!==q.c) correct=false;
    });

    submitBtn.classList.add("hidden");
    correct ? continueBtn.classList.remove("hidden") : retryBtn.classList.remove("hidden");
};

retryBtn.onclick=startQuiz;
continueBtn.onclick=showNotepad;

// ðŸ” DEV26 handler
document.addEventListener("keydown",e=>{
    devBuffer += e.key.toLowerCase();
    if(devBuffer.endsWith("dev26")) showNotepad();
    if(devBuffer.length>10) devBuffer="";
});

function showNotepad(){
    document.body.innerHTML="";
    const win=document.createElement("div");
    win.className="window";
    win.style.width="420px";
    win.style.margin="50px auto";
    win.innerHTML=`
        <div class="titlebar">untitled.txt</div>
        <div class="content" style="padding:20px;">
            <h3>Placeholder Title</h3>
            <p>
Placeholder body text.

This could be anything:
a secret,
a message,
or something meant only to be found.
            </p>
            <button onclick="location.href='loveme.html'">Back</button>
        </div>
    `;
    document.body.appendChild(win);
}

startQuiz();
</script>

</body>
</html>
